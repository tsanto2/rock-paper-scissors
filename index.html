<!DOCTYPE html>
<html>
    <head>
        <title>RPS ULTIMATE</title>
    </head>

    <body>
        <button id="shoot-button">SHOOT!</button>
        <button id="restart-button">Try again.</button>

        <script>
            var shootButton = document.getElementById('shoot-button');
            var restartButton = document.getElementById('restart-button');

            let userChoiceEntry = prompt("Enter rock, paper, or scissors.");

            restartButton.onclick = function() {
                userChoiceEntry = prompt("Enter rock, paper, or scissors.");
            }

            shootButton.onclick = function() {
                let alertString = getWinner(userChoiceEntry, computerPlay());
                if (alertString == undefined)
                    return;
                else
                    alert(alertString);
            }
            
            function computerPlay() {
                let random = Math.floor(Math.random() * 3);
                
                let result = "whoops";
                switch (random) {
                    case 0:
                        result = "rock";
                        break;
                    case 1:
                        result = "paper";
                        break;
                    case 2:
                        result = "scissors";
                        break;
                }

                return result;
            }

            function prepUserChoice(userCh) {
                let choiceLower = userCh.toLowerCase();
                
                return choiceLower;
            }

            function getResultText(userChoice, pcChoice, userWin) {
                let resultString = "Sum ting wong...";

                if (userWin) {
                    resultString = "You win! " + setFrontCap(userChoice) + " beats " + pcChoice + "!";
                }
                else {
                    resultString = "You lost! " + setFrontCap(pcChoice) + " beats " + userChoice + "!";
                }

                return resultString;
            }
            
            function setFrontCap(stringToCap){
                let frontChar = stringToCap.charAt(0);
                let restOfStr = stringToCap.slice(1, stringToCap.length);
                let frontCharCap = frontChar.toUpperCase();
                let restOfStrLow = restOfStr.toLowerCase();

                return frontCharCap + restOfStrLow;
            }

            function getWinner(user, pc) {
                user = prepUserChoice(user);

                let draw = (user == pc);
                if (draw){
                    let resultString = "Draw! Both selected " + user + "!";
                    return resultString;
                }

                let userWin;
                switch (user) {
                    case "rock":
                        userWin = (pc == "scissors");
                        break;
                    case "paper":
                        userWin = (pc == "rock");
                        break;
                    case "scissors":
                        userWin = (pc == "paper");
                        break;
                    default:
                        alert("Something fucked up...");
                        return;
                }

                return getResultText(user, pc, userWin);
            }
        </script>
    </body>
</html>